# -*- mode: sh -*-
ALTERNATE_EDITOR=vim
BROWSER=qutebrowser
EDITOR=emacsclient
LANG=en_US.UTF-8
RIPGREP_CONFIG_PATH=$HOME/.ripgreprc
TMPDIR=${XDG_RUNTIME_DIR:-$TMPDIR}/tmp
TMPDIR=${TMPDIR/?tmp?tmp/\/tmp}

for p in $HOME/{,go,.{local,cargo}/}bin
do if ! [[ $p =~ $path ]]; then
path+=("$p")
   fi
done


if [[ ${TMUX}${TMUX_PANE} ]]; then
case `# Parent`$(readlink /proc/$PPID/cmdline) in
  *tmux*);;
  *) # FIXME DOOM Emacs env import
     unset TMUX
     unset TMUX_PANE
esac
fi


eval "${TMUX:+PAGER=\cat}"
eval "${TMUX:+SYSTEMD_PAGER=\cat}"

export PAGER

# cleanup env for non tmux terminals
case $(readlink /proc/$PPID/exe `# get parent exe`) in
    *tmux*)
    ;;
    *)
        case ${#TMUX} in
            0);;
            *)
                eval "$(set | sed -E '/^(TMUX[^=]*).*/!d;{s##unset \\1#}')"
        esac
esac

if [[ $- =~ i ]]; then
test -f $HOME/.aliases && . $HOME/.aliases
test -f $HOME/.functions && . $HOME/.functions
test -f $HOME/.zsh_plugins && . $HOME/.zsh_plugins
fi

source /etc/os-release
case ${PLATFORM_ID##*:} in
    f3[89])
        hash rustc=/usr/bin/rustc
        hash cargo=/usr/bin/cargo
        ;;
    *)
esac

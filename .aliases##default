# -*- mode: sh -*-
# unalias ls

if command -v podman &>/dev/null; then
alias docker='command podman'
fi

# alias -- grep='command rg' # FIXME

alias -- top='command btop'

alias -- @='/usr/bin/env xargs'
alias -- @0='/usr/bin/env xargs --null'
alias -- @1='/usr/bin/env xargs -n1'
alias -- @P='/usr/bin/env xargs --max-procs=$(cpus)'
alias -- @P1='/usr/bin/env xargs --max-procs=$(cpus) -n1'

# FIXME should be a helper function
alias -- cpus='pushd /sys/class/cpuid &>/dev/null; set *; echo $#; popd &>/dev/null #'

alias -- tar='command tar --exclude-from=${HOME}/.config/ignore --exclude-vcs-ignores'

alias -- reload='. ~/.${BASH_VERSION:+bash}${ZSH_VERSION:+zsh}rc'
alias -- rl='reload'

# ???
# alias -- append='f() { { env; set; } | grep -i -e ${SHELL##*/} -e "$@" | while IFS='=' read x y; do echo ${#y} ; done; }; f'

alias -- ,man='tmux display-popup -B' # FIXME
# alias -- cat='command highlight -O ansi --force' # FIXME

alias -- buf='command stdbuf -oL'

alias -- edit='command ${EDITOR:-${VISUAL:-vi}} `test [[ $EDITOR =~ emacs ]] && echo --no-wait`'

alias -- json="command grep -Poz '{[\s\S]+}'"
# alias -- jq='command jq --from-file ~/.functions.jq' # FIXME jq have rc file?

alias -- md='\mkdir'

alias -- capp='tmux capture-pane -p'

# TODO systemctl verbs with completion


#
# tmux
#

# pane direction
for ITEM in up down right left; do
eval "alias -- capp${ITEM::1}='tmux capture-pane -p -t '\''{ITEM}'\'' | cat --squeeze-blank' ; alias -- capu='capp${ITEM::1}'"
done

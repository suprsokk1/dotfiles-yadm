# -*- mode: sh -*-
if command -v podman &>/dev/null; then
alias docker='command podman'
fi

# TODO prefix aliases with ',' except those already prefixed with @
# TODO systemctl verbs with completion
# TODO 'grep' wrapper function for 'rg'
# alias -- grep='command rg' # FIXME

alias -- top='command btop'

alias -- @='/usr/bin/env xargs'
alias -- @0='/usr/bin/env xargs --null'
alias -- @1='/usr/bin/env xargs -n1'
alias -- @P='/usr/bin/env xargs --max-procs=$(cpus)'
alias -- @P1='/usr/bin/env xargs --max-procs=$(cpus) -n1'

# FIXME should be a helper function
alias -- cpus='pushd /sys/class/cpuid &>/dev/null; set *; echo $#; popd &>/dev/null #'

alias -- tar='command tar --exclude-from=${HOME}/.config/ignore --exclude-vcs-ignores'

alias -- reload='. ~/.${BASH_VERSION:+bash}${ZSH_VERSION:+zsh}rc'
alias -- rl='reload'

alias -- ,man='tmux display-popup -B' # FIXME
# alias -- cat='command highlight -O ansi --force' # FIXME

alias -- buf='command stdbuf -oL'

alias -- edit='command ${EDITOR:-${VISUAL:-vi}} `test [[ $EDITOR =~ emacs ]] && echo --no-wait`'

alias -- grep-json="command grep -Poz '{[\s\S]+}'"
# alias -- jq='command jq --from-file ~/.functions.jq' # FIXME jq have rc file?

alias -- md='\mkdir'

# TODO read aliases from tmux config
alias -- capp='tmux capture-pane -p'

alias -- pgrep='command pgrep --list-full'

#
# tmux
#

# pane direction
for ITEM in up down right left; do
eval "alias -- capp${ITEM::1}='tmux capture-pane -p -t '\''{ITEM}'\'' | cat --squeeze-blank' ; alias -- capu='capp${ITEM::1}'"
done

# -*- mode: conf -*-

# font Iosevka:size=0
# font Iosevka 0
font San Francisco Display 0

# output * bg /usr/share/backgrounds/sway/Sway_Wallpaper_Blue_1920x1080.png fill
output * bg ~/Downloads/04131_mistyyosemite_5120x2880.jpg fill

xwayland enable

# set $border_px 3
set $border_px smart

default_border pixel $border_px


#: Default|stacking|tabbed
workspace_layout tabbed

#: left|center|right
title_align right

# modifiers
set $Alt   Mod1
set $Hyper Mod3
set $Meta  Mod1
set $Super Mod4

gaps inner 10

# gaps inner all set 20
# gaps outer current plus 5
# gaps horizontal current plus 40
# gaps outer current toggle 60

#
set $audio_step     5
set $brighness_step 5

# terminal
set $TERM         alacritty

# bindsym
set $rofi_initial drun

bindsym --to-code $Super+Tab        focus next
bindsym --to-code $Super+f          fullscreen toggle
# bindsym --to-code $Hyper+$Meta+c    reload
bindsym --to-code $Meta+$Hyper+c    reload
bindsym --to-code $Meta+$Super+c    reload

# bindsym --to-code $Hyper+$Meta+c    mode "restart"

bindsym --to-code {
   Mod4+d exec --no-startup-id "rofi -show drun -modi drun,window,ssh"
   Mod3+d exec --no-startup-id "rofi -show drun -modi drun,window,ssh"
}

bindsym --to-code --locked {
  XF86AudioLowerVolume exec pactl set-sink-volume @DEFAULT_SINK@ -$audio_step%
  XF86AudioMicMute exec pactl set-source-mute @DEFAULT_SOURCE@ toggle
  XF86AudioMute exec pactl set-sink-mute @DEFAULT_SINK@ toggle
  XF86AudioRaiseVolume exec pactl set-sink-volume @DEFAULT_SINK@ +$audip_step%
  XF86MonBrightnessDown exec brightnessctl set $brighness_step%-
  XF86MonBrightnessUp exec brightnessctl set +$brighness_step%
}

workspace 3
workspace 2
workspace 1

bindsym  $Super+1 workspace 1
bindsym  $Super+2 workspace 2
bindsym  $Super+3 workspace 3

# /usr/include/X11/keysymdef.h
input type:keyboard {
  xkb_options caps:hyper
  # default: 250
  repeat_delay 250

  # default: 45
  repeat_rate 20
}

mode "restart" {
     bindsym Return mode "default"
     bindsym Escape mode "default"
}

input type:touchpad {
      dwt enabled
      tap enabled
      natural_scroll enabled
      middle_emulation enabled

      # disable mouse acceleration (enabled by default; to set it manually, use "adaptive" instead of "flat")
      accel_profile "flat"

      # set mouse sensitivity (between -1 and 1)
      pointer_accel 0.5
}

# include $HOME/.sway/config.d/*.conf
# include $HOME/.i3/config.d/*.conf

for_window [class=".*"] border_pixel $border_px
For_window [class="^Menu$"] floating enabled



# bindsym --to-code Mod4+0 exec --no-startup-id "alacritty --class=Menu"
include /etc/sway/config.d/*.


set $move_mode "[1-3]: Move window to workspace"
mode $move_mode {
    bindsym 1 move to workspace 1; mode "default"
    bindsym 2 move to workspace 2; mode "default"
    bindsym 3 move to workspace 3; mode "default"

    bindsym $Super+1 move to workspace 1
    bindsym $Super+2 move to workspace 2
    bindsym $Super+3 move to workspace 3

    bindsym $Hyper+1 move to workspace 1
    bindsym $Hyper+2 move to workspace 2
    bindsym $Hyper+3 move to workspace 3

    # Return to default mode
    bindsym Return mode "default"
    bindsym Escape mode "default"
}


set $layout_mode "1: Default(tiled) 2: Tabbed 3: Stacked"
mode $kill_mode {
     bindsym q kill; mode "default"
     bindsym $Super+q kill; mode "default"
     bindsym $Hyper+q kill; mode "default"

    # Return to default mode
    bindsym Return mode "default"
    bindsym Escape mode "default"
}


set $kill_mode "Kill window?"
mode $kill_mode {
     bindsym q kill; mode "default"

    # Return to default mode
    bindsym Return mode "default"
    bindsym Escape mode "default"
}

set $menu_mode "1: Move window to workspace  2: Layout 3:  q: kill window"
mode $menu_mode {
    bindsym 1 mode $move_mode
    bindsym 2 mode "default"
    bindsym 3 mode "default"
    bindsym q  $kill_mode

    # Return to default mode
    bindsym Return mode "default"
    bindsym Escape mode "default"
}
bindsym $Super+t mode $menu_mode

exec_always {
  pgrep waybar || waybar
  # pkill --signal SIGUSR1 --exact waybar
  # pkill --signal SIGUSR --exact waybar
  pkill --signal SIGUSR2 --exact waybar
}


# for_window [class='(?i)emacs'] move to workspace 1
for_window [title='(?i)emacs'] move to workspace 1; border 3px

assign [class='(?i)emacs']        1
assign [class='(?i)qutebrowser']  2
assign [class='(?i)alacritty']    3

# # mute
# bindsym --to-code --locked XF86AudioMute          exec pactl set-sink-mute @DEFAULT_SINK@ toggle

# # volume up
# bindsym --to-code --locked XF86AudioRaiseVolume   exec pactl set-sink-volume @DEFAULT_SINK@ +$audip_step%

# # volume down
# bindsym --to-code --locked XF86AudioLowerVolume   exec pactl set-sink-volume @DEFAULT_SINK@ -$audio_step%

# # mute microphone
# bindsym --to-code --locked XF86AudioMicMute       exec pactl set-source-mute @DEFAULT_SOURCE@ toggle

# # brightness up
# bindsym --to-code --locked XF86MonBrightnessUp    exec brightnessctl set +$brighness_step%

# # brightness down
# bindsym --to-code --locked XF86MonBrightnessDown  exec brightnessctl set $brighness_step%-

{#-*- mode: jinja2 -*-#}
{#- dest: env.j2 -#}
{%- macro j2set(key, value) -%}
{%- set kind = value.__class__.__name__ -%}
{%- set wrap = dict(str='''"''').get(kind, '') -%}
{%- set prefix = "{%-" -%}
{%- set suffix = "-%}\n" -%}
{%- set spacing = " " -%}
{%- set separator = spacing + "=" + spacing -%}
{{- prefix -}}
{{- spacing -}}
{{- key -}}
{{- separator -}}
{{- wrap -}}
{{- value -}}
{{- wrap -}}
{{- spacing -}}
{{- suffix -}}
{%- endmacro -%}

{# {%- for item in env.items() -%} #}
{# {{ j2set(*item) }} #}
{# {%- endfor -%} #}

{# {{ dir }} #}
{# {{ zsh }} #}
{# {{ regex }} #}
{# {%- for item in zsh.items() -%} #}
{# {{ j2set(*item) }} #}
{# {%- endfor -%} #}
{# {{ yadm }} #}
